import{useApi as e,defineInterface as a}from"@directus/extensions-sdk";import{defineComponent as t,ref as o,inject as n,watch as d,resolveComponent as l,resolveDirective as i,openBlock as c,createBlock as s,withCtx as u,createCommentVNode as v,createElementBlock as r,createVNode as y,withDirectives as p,createTextVNode as m,toDisplayString as h,createSlots as D,mergeProps as f,toHandlers as T}from"vue";const B={Advance:0,"Second Advance":1,"Third Advance":2,"Fourth Advance":3,Provisional:4,"Second Provisional":5,"Third Provisional":6,"Fourth Provisional":7,Final:8};var _=t({props:{value:{type:Object,default:null}},emits:["input"],setup(a,{emit:t}){var l;const i=e(),c=o(),s=o(),u=o(),v=o(),r=o(),y=o(),p=o(),m=o(),h=o(),D=o(),f=o(!1),T=o(""),_=o([]),b=o({}),I=o({}),k=o({}),A=o({qp:null,date:null}),P=o({}),g=o(null!=(l=a.value)?l:{}),S="contract",F="invoice_date",O="navarch_contract_payment_information",C="related_contract",M="invoice_type",$="pa_days",w="pa_day_type",V="pa_ref_day",L="estimate_arrival_date",N="actual_arrival_date",x="bl_date",E="estimated_shipment_date",q="parcel_finalisation_date",U="qp_selection",J=n("values",o({}));return d((()=>J.value[S]),(async e=>{f.value=!!J.value[S],e?(await async function(e){console.log("[loadInvoiceTypeList]");try{const a=await i.get(`/items/${O}`,{params:{filter:{[C]:{_eq:e}},fields:[M,$,w,V]}});_.value=a.data.data.map((e=>e[M])).filter((e=>Object.keys(B).includes(e))).sort(((e,a)=>B[e]-B[a]));const t={};j(J.value[U],J.value),b.value=a.data.data.reduce(((e,a)=>{console.debug(`[loadInvoiceTypeList] item: ${JSON.stringify(a)}`);const o="Final"===a[M]?function(e){if(null===e)return"invalid";const a=e.split(" ");switch(a[1]){case"MAMA":return N;case"MOSS":return E;case"MOS":case"MOAS":return x;default:return"invalid"}}(A.value.qp):function(e){switch(e){case"Arrival Date":return N;case"B/L Date":case"End of Month of Delivery":return x;case"Invoice Date":return F;case"Estimated Shipment Date":return E;case"Parcel Finalisation":return q;default:return"invalid"}}(a[V]);return t[o]instanceof Array?t[o].push(a[M]):t[o]=[a[M]],e[a[M]]={days:a[$],day_type:a[w],ref_day:a[V]},e}),{}),console.log(`[loadInvoiceTypeList] paymentAdviceConfigByInvoiceType: ${JSON.stringify(b.value)}`),P.value=t}catch(e){console.error(e)}console.log("[loadInvoiceTypeList] done")}(e),function(){const e={},a=Object.keys(g.value);if(_.value.length===a.length){if(_.value.every((e=>a.includes(e))))return}_.value.forEach((a=>{g.value[a]?e[a]=g.value[a]:e[a]={due_date:null,locked:!1,inv_type:a}})),g.value=e}(),Q()):t("input",null)}),{immediate:!0}),d(g,(e=>{console.log(`[watch] due dates by invoice updated, newDueDatesByInvoiceType: ${JSON.stringify(e)}`),t("input",JSON.stringify(e))}),{deep:!0}),d((()=>J.value[L]),(async()=>{Object.keys(P.value).includes(L)&&Q(P.value[L])})),d((()=>J.value[N]),(async()=>{Object.keys(P.value).includes(N)&&Q(P.value[N])})),d((()=>J.value[x]),(async()=>{Object.keys(P.value).includes(x)&&Q(P.value[x])})),d((()=>J.value[E]),(async()=>{console.log(`[watch] ${E} updated`),console.log(`[watch] datesToWatchInParcelForm: ${JSON.stringify(P.value)}`),Object.keys(P.value).includes(E)&&(console.log(`[watch] ${E} included in dates to watch`),Q(P.value[E]))})),d((()=>J.value[q]),(async()=>{Object.keys(P.value).includes(q)&&Q(P.value[q])})),d((()=>J.value[U]),(e=>{console.log(`[watch] ${U} updated to ${JSON.stringify(e)} with type ${typeof e}`),Q(["Final"])})),{invoiceTypeList:_,dueDatesByInvoiceType:g,dueDateDecriptionsByInvoiceTypeBasedOnContract:I,dueDatesByInvoiceTypeBasedOnContract:k,isContractSelected:f,failureReason:T,dateTimeMenu:c,dateTimeMenuAdvance:s,dateTimeMenuSecondAdvance:u,dateTimeMenuThirdAdvance:v,dateTimeMenuFourthAdvance:r,dateTimeMenuProvisional:y,dateTimeMenuSecondProvisional:p,dateTimeMenuThirdProvisional:m,dateTimeMenuFourthProvisional:h,dateTimeMenuFinal:D,updateDueDate:function(e,a){if(console.log(`[updateDueDate] invType: ${e}, newDueDate: ${a}`),!g.value[e])return void console.warn(`[updateDueDate] due date for ${e} does not exist`);g.value[e].due_date=a,console.log("[updateDueDate] done")},unsetValue:function(e){if(console.log(`[unsetValue] invType: ${e}`),!g.value[e])return void console.warn(`[unsetValue] due date for ${e} is already unset`);g.value[e].due_date=null,console.log("[unsetValue] done")},displayDate:function(e){const a=e?new Date(e):null;return a?a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):""},formatDate:X};async function Q(e){var a,t,o;console.log("[updateEstimatedDueDatesBasedOnContract]"+(e?` updateOnlyInvTypes: ${JSON.stringify(e)}`:""));for(const n of void 0!==e?e:_.value){"Final"===n&&j(J.value[U],J.value),console.log(`[updateEstimatedDueDatesBasedOnContract] payment advice config by inv type: ${JSON.stringify(b.value)}`),W(n,b.value[n].days,b.value[n].day_type,b.value[n].ref_day);const e={invoice_type:n,days:b.value[n].days,day_type:b.value[n].day_type,ref_day:"Final"===n?void 0:b.value[n].ref_day};let d,l="";if("Final"!==n)switch(e.ref_day){case"Arrival Date":l="Actual/Estimated Arrival Date from the Parcel form",d=null!=(a=J.value[N])?a:J.value[L];break;case"B/L Date":l="B/L Date (or Estimated Shipment Date) from the Parcel form",d=null!=(t=J.value[x])?t:J.value[E];break;case"End of Month of Delivery":l="B/L Date (or Estimated Shipment Date) from the Parcel form",d=null!=(o=J.value[x])?o:J.value[E];const c=new Date(d);c.setMonth(c.getMonth()+1,0),d=K(c);break;case"Invoice Date":l="Invoice Date from the Invoice form";const s=await i.get("/items/navarch_invoices",{params:{filter:{parcel:{_eq:J.value.id},invoice_type:{_eq:n}},sort:"-invoice_date",fields:[F]}});d=s.data.data.length>0?s.data.data[0][F]:void 0;break;case"Estimated Shipment Date":l="Estimated Shipment Date from the Parcel form",d=J.value[E];break;case"Parcel Finalisation":if(void 0===J.value[q]||null===J.value[q])throw new Error("[generateInvoice] Parcel has not been finalised, please fill in the the parcel finalisation date in the parcel form.");l="Parcel Finalisation Date from the Parcel form",d=J.value[q];break;default:throw new Error(`Invalid reference day for payment advice: ${e.ref_day}; please contact Navarch for support`)}else l="last day of the last QP Month";if("Final"!==n&&Y(d)){console.warn(`Reference day for payment advice ${l} is empty in parcel`);continue}console.log(`[updateEstimatedDueDatesBasedOnContract] invType: ${n}, readablePaymentAdviceRefDayType: ${l}, refDayAsString: ${d}`);const c="Final"===n?A.value.date:Y(d)?null:new Date(d),s=parseInt(e.days),u=e.day_type;if(null===c||!z(c)){I.value[n]=`${s} ${u} ${s<0?"before":"after"} ${l} based on contract`,k.value[n]="N/A";continue}let v;switch(console.log(`[updateEstimatedDueDatesBasedOnContract] invType: ${n}, dayRange: ${s}, dayType: ${u}, refDate: ${c}`),u){case"Business Day(s)":v=G(c,s);break;case"Calendar Day(s)":v=new Date(c.valueOf()),v.getHours()>=12?v.setDate(v.getDate()+s+1):v.setDate(v.getDate()+s);break;default:throw new Error(`Invalid day_type for payment advice ${u}`)}console.log(`[updateEstimatedDueDatesBasedOnContract] invType: ${n}, dueDate: ${v}`),I.value[n]=`${s} ${u} ${s<0?"before":"after"} ${l} (${X(c)}) based on contract`,k.value[n]=X(v)}}function j(e,a){if(console.log(`[findAndSetLatestQpMonthAndGetLastDayOfTheMonth] qpSelectionByCommodityCode: ${JSON.stringify(e)}`),null===e)return void console.log("[findAndSetLatestQpMonthAndGetLastDayOfTheMonth] qpSelectionByCommodityCode not yet loaded or is deselected. Returning and moving on, this will run again once the qp selection is loaded");"string"==typeof e&&(e=JSON.parse(e));const t=Object.values(e),o=t.map((e=>({qp:e.qp_selected,date:R(e,a)}))).filter((e=>z(e.date))).sort(((e,a)=>a.date.valueOf()-e.date.valueOf()));console.log(`[findAndSetLatestQpMonthAndGetLastDayOfTheMonth] unfiltered: ${JSON.stringify(t.map((e=>({qp:e.qp_selected,date:R(e,a)}))))}}`),console.log(`[findAndSetLatestQpMonthAndGetLastDayOfTheMonth] unsorted: ${JSON.stringify(t.map((e=>({qp:e.qp_selected,date:R(e,a)}))).filter((e=>z(e.date))))}`),console.log(`[findAndSetLatestQpMonthAndGetLastDayOfTheMonth] listOfQpSelectedMonthDates: ${JSON.stringify(o)}}`),0===o.length?A.value={qp:null,date:null}:(A.value=o[0],console.log(`[findAndSetLatestQpMonthAndGetLastDayOfTheMonth] latestQpMonthSelectionForFinalInvoiceType: ${JSON.stringify(A.value)}`))}function R(e,a,t=!1){var o,n;if(t&&!e.declared)return null;const d=null==e?void 0:e.qp_selected;if(!d)return null;const l=d.split(" "),i={qp_period:parseInt(l[0]),qp_code:l[1]};let c,s;switch(i.qp_code){case"MAMA":c=new Date(null!=(o=a[N])?o:a[L]),s="Actual/Estimated Arrival Date";break;case"MOSS":c=new Date(a[E]),s="Estimated Shipment Date";break;case"MOS":case"MOAS":c=new Date(null!=(n=a[x])?n:a[E]),s="B/L Date (or Estimated Shipment Date)";break;default:throw new Error(`Unsupported QP code ${i.qp_code} in the contract commodities, please ensure all commodity QP codes are MAMA, MOS, MOSS, or MOAS`)}return console.log(`[getLastDayOfQpMonthForQpSelection] qpSelection: ${JSON.stringify(i)}, refDay: ${c}, readableRefDayType: ${s}`),function(e,a){const t=new Date(e.valueOf());return t.setMonth(t.getMonth()+a+1,0),t}(c,i.qp_period)}function G(e,a,t=!1){const o=new Date(e.valueOf());let n=a-(t?1:0),d=!0;for(;H(o);)o.setDate(o.getDate()+1),d&&(n-=1,d=!1);for(;n>0;)o.setDate(o.getDate()+1),H(o)||(n-=1);for(o.getHours()>=12&&o.setDate(o.getDate()+1);H(o);)o.setDate(o.getDate()+1);return o}function H(e){return 0===e.getDay()||6===e.getDay()}function Y(e){return null==e}function W(e,a,t,o){if(!e)throw new Error("Please ensure the payment advice is properly set in the contract for all invoice types");if(!a)throw new Error(`Please ensure that the number of days is set for the ${e} payment advice of the associated contract`);if(!t)throw new Error(`Please ensure that the day type is set for the ${e} payment advice of the associated contract`);if("Final"!==e&&!o)throw new Error(`Please ensure that the reference date is set for the ${e} payment advice of the associated contract`)}function z(e){return e instanceof Date&&!isNaN(e.getTime())}function K(e,a=!0){const t=e.getMonth()+1,o=e.getDate();return`${e.getFullYear()}${a?"-":" "}${t<10?"0":""}${t}${a?"-":" "}${o<10?"0":""}${o}`}function X(e){const a=e.getDate(),t=e.getMonth(),o=e.getFullYear();return`${a} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]} ${o}`}}});const b={key:0},I={key:1},k={class:"list-item-component left"},A={class:"list-item-component left"},P={class:"list-item-component left"},g={class:"list-item-component left"},S={class:"list-item-component left"},F={class:"list-item-component left"},O={class:"list-item-component left"},C={class:"list-item-component left"},M={class:"list-item-component left"};var $=[],w=[];!function(e,a){if(e&&"undefined"!=typeof document){var t,o=!0===a.prepend?"prepend":"append",n=!0===a.singleTag,d="string"==typeof a.container?document.querySelector(a.container):document.getElementsByTagName("head")[0];if(n){var l=$.indexOf(d);-1===l&&(l=$.push(d)-1,w[l]={}),t=w[l]&&w[l][o]?w[l][o]:w[l][o]=i()}else t=i();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function i(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),a.attributes)for(var t=Object.keys(a.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],a.attributes[t[n]]);var l="prepend"===o?"afterbegin":"beforeend";return d.insertAdjacentElement(l,e),e}}('.list-item[data-v-64969d30] {\n  margin-bottom: 10px;\n}\n.list-item-component[data-v-64969d30] {\n  float: left;\n}\n.left[data-v-64969d30] {\n  width: 30%;\n}\n.middle[data-v-64969d30] {\n  width: 40%;\n}\n.right[data-v-64969d30] {\n  width: 30%;\n  padding-left: 20px;\n}\n\n/* Clear floats after the columns */\n.list-item[data-v-64969d30]:after {\n  content: "";\n  display: table;\n  clear: both;\n}',{}),_.render=function(e,a,t,o,n,d){const B=l("v-icon"),_=l("v-input"),$=l("v-date-picker"),w=l("v-menu"),V=l("v-checkbox"),L=l("v-list-item"),N=l("v-list"),x=l("v-sheet"),E=i("tooltip");return c(),s(x,null,{default:u((()=>[v(" <div>{{ dueDatesByInvoiceType }}</div>\r\n\t\t<div>{{ invoiceTypeList }}</div>\r\n\t\t<div>{{ dateTimeMenu }}</div> "),v(" <div>{{ dateTimeMenu }}</div>\r\n\t\t<div>{{ dateTimeMenuByInvoiceType }}</div> "),e.isContractSelected?e.isContractSelected&&e.invoiceTypeList&&e.dueDatesByInvoiceType?(c(),r("div",I,[y(N,null,{default:u((()=>[e.dueDatesByInvoiceType.Advance?(c(),s(L,{class:"list-item",key:"Advance"},{default:u((()=>[p((c(),r("div",k,[m(h(`Advance (${e.dueDatesByInvoiceTypeBasedOnContract.Advance??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract.Advance??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuAdvance","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType.Advance.locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType.Advance.due_date),disabled:e.dueDatesByInvoiceType.Advance.locked,placeholder:e.dueDatesByInvoiceType.Advance.due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType.Advance.locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType.Advance.due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType.Advance.due_date,"today-icon":!e.dueDatesByInvoiceType.Advance.due_date}},T({click:e.dueDatesByInvoiceType.Advance.due_date?()=>e.unsetValue("Advance"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType.Advance.locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[0]||(a[0]=a=>e.updateDueDate("Advance",a)),onClose:e.dateTimeMenuAdvance?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType.Advance.locked,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dueDatesByInvoiceType.Advance.locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType.Advance.due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType.Advance.due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType["Second Advance"]?(c(),s(L,{class:"list-item",key:"Second Advance"},{default:u((()=>[p((c(),r("div",A,[m(h(`Second Advance (${e.dueDatesByInvoiceTypeBasedOnContract["Second Advance"]??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract["Second Advance"]??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuSecondAdvance","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType["Second Advance"].locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType["Second Advance"].due_date),disabled:e.dueDatesByInvoiceType["Second Advance"].locked,placeholder:e.dueDatesByInvoiceType["Second Advance"].due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType["Second Advance"].locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType["Second Advance"].due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType["Second Advance"].due_date,"today-icon":!e.dueDatesByInvoiceType["Second Advance"].due_date}},T({click:e.dueDatesByInvoiceType["Second Advance"].due_date?()=>e.unsetValue("Second Advance"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType["Second Advance"].locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[2]||(a[2]=a=>e.updateDueDate("Second Advance",a)),onClose:e.dateTimeMenuSecondAdvance?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType["Second Advance"].locked,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dueDatesByInvoiceType["Second Advance"].locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType["Second Advance"].due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType["Second Advance"].due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType["Third Advance"]?(c(),s(L,{class:"list-item",key:"Third Advance"},{default:u((()=>[p((c(),r("div",P,[m(h(`Third Advance (${e.dueDatesByInvoiceTypeBasedOnContract["Third Advance"]??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract["Third Advance"]??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuThirdAdvance","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType["Third Advance"].locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType["Third Advance"].due_date),disabled:e.dueDatesByInvoiceType["Third Advance"].locked,placeholder:e.dueDatesByInvoiceType["Third Advance"].due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType["Third Advance"].locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType["Third Advance"].due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType["Third Advance"].due_date,"today-icon":!e.dueDatesByInvoiceType["Third Advance"].due_date}},T({click:e.dueDatesByInvoiceType["Third Advance"].due_date?()=>e.unsetValue("Third Advance"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType["Third Advance"].locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[4]||(a[4]=a=>e.updateDueDate("Third Advance",a)),onClose:e.dateTimeMenuThirdAdvance?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType["Third Advance"].locked,"onUpdate:modelValue":a[5]||(a[5]=a=>e.dueDatesByInvoiceType["Third Advance"].locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType["Third Advance"].due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType["Third Advance"].due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType["Fourth Advance"]?(c(),s(L,{class:"list-item",key:"Fourth Advance"},{default:u((()=>[p((c(),r("div",g,[m(h(`Fourth Advance (${e.dueDatesByInvoiceTypeBasedOnContract["Fourth Advance"]??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract["Fourth Advance"]??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuFourthAdvance","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType["Fourth Advance"].locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType["Fourth Advance"].due_date),disabled:e.dueDatesByInvoiceType["Fourth Advance"].locked,placeholder:e.dueDatesByInvoiceType["Fourth Advance"].due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType["Fourth Advance"].locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType["Fourth Advance"].due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType["Fourth Advance"].due_date,"today-icon":!e.dueDatesByInvoiceType["Fourth Advance"].due_date}},T({click:e.dueDatesByInvoiceType["Fourth Advance"].due_date?()=>e.unsetValue("Fourth Advance"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType["Fourth Advance"].locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[6]||(a[6]=a=>e.updateDueDate("Fourth Advance",a)),onClose:e.dateTimeMenuFourthAdvance?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType["Fourth Advance"].locked,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dueDatesByInvoiceType["Fourth Advance"].locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType["Fourth Advance"].due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType["Fourth Advance"].due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType.Provisional?(c(),s(L,{class:"list-item",key:"Provisional"},{default:u((()=>[p((c(),r("div",S,[m(h(`Provisional (${e.dueDatesByInvoiceTypeBasedOnContract.Provisional??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract.Provisional??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuProvisional","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType.Provisional.locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType.Provisional.due_date),disabled:e.dueDatesByInvoiceType.Provisional.locked,placeholder:e.dueDatesByInvoiceType.Provisional.due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType.Provisional.locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType.Provisional.due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType.Provisional.due_date,"today-icon":!e.dueDatesByInvoiceType.Provisional.due_date}},T({click:e.dueDatesByInvoiceType.Provisional.due_date?()=>e.unsetValue("Provisional"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType.Provisional.locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[8]||(a[8]=a=>e.updateDueDate("Provisional",a)),onClose:e.dateTimeMenuProvisional?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType.Provisional.locked,"onUpdate:modelValue":a[9]||(a[9]=a=>e.dueDatesByInvoiceType.Provisional.locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType.Provisional.due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType.Provisional.due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType["Second Provisional"]?(c(),s(L,{class:"list-item",key:"Second Provisional"},{default:u((()=>[p((c(),r("div",F,[m(h(`Second Provisional (${e.dueDatesByInvoiceTypeBasedOnContract["Second Provisional"]??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract["Second Provisional"]??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuSecondProvisional","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType["Second Provisional"].locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType["Second Provisional"].due_date),disabled:e.dueDatesByInvoiceType["Second Provisional"].locked,placeholder:e.dueDatesByInvoiceType["Second Provisional"].due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType["Second Provisional"].locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType["Second Provisional"].due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType["Second Provisional"].due_date,"today-icon":!e.dueDatesByInvoiceType["Second Provisional"].due_date}},T({click:e.dueDatesByInvoiceType["Second Provisional"].due_date?()=>e.unsetValue("Second Provisional"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType["Second Provisional"].locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[10]||(a[10]=a=>e.updateDueDate("Second Provisional",a)),onClose:e.dateTimeMenuSecondProvisional?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType["Second Provisional"].locked,"onUpdate:modelValue":a[11]||(a[11]=a=>e.dueDatesByInvoiceType["Second Provisional"].locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType["Second Provisional"].due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType["Second Provisional"].due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType["Third Provisional"]?(c(),s(L,{class:"list-item",key:"Third Provisional"},{default:u((()=>[p((c(),r("div",O,[m(h(`Third Provisional (${e.dueDatesByInvoiceTypeBasedOnContract["Third Provisional"]??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract["Third Provisional"]??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuThirdProvisional","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType["Third Provisional"].locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType["Third Provisional"].due_date),disabled:e.dueDatesByInvoiceType["Third Provisional"].locked,placeholder:e.dueDatesByInvoiceType["Third Provisional"].due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType["Third Provisional"].locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType["Third Provisional"].due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType["Third Provisional"].due_date,"today-icon":!e.dueDatesByInvoiceType["Third Provisional"].due_date}},T({click:e.dueDatesByInvoiceType["Third Provisional"].due_date?()=>e.unsetValue("Third Provisional"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType["Third Provisional"].locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[12]||(a[12]=a=>e.updateDueDate("Third Provisional",a)),onClose:e.dateTimeMenuThirdProvisional?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType["Third Provisional"].locked,"onUpdate:modelValue":a[13]||(a[13]=a=>e.dueDatesByInvoiceType["Third Provisional"].locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType["Third Provisional"].due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType["Third Provisional"].due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType["Fourth Provisional"]?(c(),s(L,{class:"list-item",key:"Fourth Provisional"},{default:u((()=>[p((c(),r("div",C,[m(h(`Fourth Provisional (${e.dueDatesByInvoiceTypeBasedOnContract["Fourth Provisional"]??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract["Fourth Provisional"]??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuFourthProvisional","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType["Fourth Provisional"].locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType["Fourth Provisional"].due_date),disabled:e.dueDatesByInvoiceType["Fourth Provisional"].locked,placeholder:e.dueDatesByInvoiceType["Fourth Provisional"].due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType["Fourth Provisional"].locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType["Fourth Provisional"].due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType["Fourth Provisional"].due_date,"today-icon":!e.dueDatesByInvoiceType["Fourth Provisional"].due_date}},T({click:e.dueDatesByInvoiceType["Fourth Provisional"].due_date?()=>e.unsetValue("Fourth Provisional"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType["Fourth Provisional"].locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[14]||(a[14]=a=>e.updateDueDate("Fourth Provisional",a)),onClose:e.dateTimeMenuFourthProvisional?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType["Fourth Provisional"].locked,"onUpdate:modelValue":a[15]||(a[15]=a=>e.dueDatesByInvoiceType["Fourth Provisional"].locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType["Fourth Provisional"].due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType["Fourth Provisional"].due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0),e.dueDatesByInvoiceType.Final?(c(),s(L,{class:"list-item",key:"Final"},{default:u((()=>[p((c(),r("div",M,[m(h(`Final (${e.dueDatesByInvoiceTypeBasedOnContract.Final??"N/A"})`),1)])),[[E,e.dueDateDecriptionsByInvoiceTypeBasedOnContract.Final??null,void 0,{bottom:!0}]]),y(w,{ref:"dateTimeMenuFinal","close-on-content-click":!1,attached:"",disabled:e.dueDatesByInvoiceType.Final.locked,"full-height":"",seamless:""},{activator:u((({toggle:a,active:t})=>[y(_,{active:t,clickable:"",readonly:"","model-value":e.displayDate(e.dueDatesByInvoiceType.Final.due_date),disabled:e.dueDatesByInvoiceType.Final.locked,placeholder:e.dueDatesByInvoiceType.Final.due_date,onClick:a},D({_:2},[e.dueDatesByInvoiceType.Final.locked?void 0:{name:"append",fn:u((()=>[y(B,f({name:e.dueDatesByInvoiceType.Final.due_date?"clear":"today",class:{active:t,"clear-icon":!!e.dueDatesByInvoiceType.Final.due_date,"today-icon":!e.dueDatesByInvoiceType.Final.due_date}},T({click:e.dueDatesByInvoiceType.Final.due_date?()=>e.unsetValue("Final"):null})),null,16,["name","class"])])),key:"0"}]),1032,["active","model-value","disabled","placeholder","onClick"])])),default:u((()=>[y($,{type:"date",disabled:e.dueDatesByInvoiceType.Final.locked,"include-seconds":!1,"use-24":!1,"model-value":e.value,"onUpdate:modelValue":a[16]||(a[16]=a=>e.updateDueDate("Final",a)),onClose:e.dateTimeMenuFinal?.deactivate},null,8,["disabled","model-value","onClose"])])),_:1},8,["disabled"]),p(y(V,{class:"list-item-component right",modelValue:e.dueDatesByInvoiceType.Final.locked,"onUpdate:modelValue":a[17]||(a[17]=a=>e.dueDatesByInvoiceType.Final.locked=a),"icon-on":"check_box","icon-off":"check_box_outline_blank",label:"Locked",disabled:null===e.dueDatesByInvoiceType.Final.due_date},null,8,["modelValue","disabled"]),[[E,e.dueDatesByInvoiceType.Final.due_date?null:"Please set a due date first.",void 0,{bottom:!0}]])])),_:1})):v("v-if",!0)])),_:1})])):v("v-if",!0):(c(),r("div",b,"Please first select a contract.")),v(' <v-notice v-if="!!failureReason">\r\n\t\t\t{{ failureReason }}\r\n\t\t</v-notice> ')])),_:1})},_.__scopeId="data-v-64969d30",_.__file="src/interface.vue";var V=a({id:"navarch-inv-due-date-setter",name:"Navarch Invoice Due Date Setter",icon:"date_range",description:"For setting invoice due dates for each type of invoice.",component:_,options:null,types:["json"],group:"standard"});export{V as default};
