import{useApi as t,defineDisplay as e}from"@directus/extensions-sdk";import{defineComponent as n,ref as r,openBlock as a,createElementBlock as l,toDisplayString as i}from"vue";const o="id",s="lot_number";var u=(t=>(t[t.Estimated=0]="Estimated",t[t.Planned=10]="Planned",t[t.Inturn=20]="Inturn",t[t["Inturn Final"]=30]="Inturn Final",t[t.Outturn=40]="Outturn",t))(u||{});var c=n({props:{value:{type:String,default:null}},setup(e){const n=t();if(!e.value)return{latestDryWeight:r(null)};const a=r(null);return async function(){const t=[];for(let r=0;r<e.value.length;r+=15){const a=e.value.slice(r,r+15);await n.get("/items/navarch_weight_lot",{params:{filter:{[o]:{_in:a},[s]:{_null:!0}},fields:["method","dry_weight","dry_weight_uom"]}}).then((e=>{const n=e.data.data;t.push(...n)})).catch((t=>{console.error(t)}))}return t}().then((t=>{const e=t.sort(((t,e)=>u[e.method]-u[t.method]));0!==e.length&&e[0]&&(a.value=`${function(t,e=2,n=!0){if(isNaN(t)||null==t)return"-";const r=Math.round(t*Math.pow(10,e))/Math.pow(10,e),[a,l]=r.toString().split("."),i=a?a.replace(/\B(?=(\d{3})+(?!\d))/g,","):0;return l||n?`${i}.${(null!=l?l:"").padEnd(e,"0")}`:i}(e[0].dry_weight,4)}${e[0].dry_weight_uom}`)})).catch((t=>{console.error(t),a.value="Error occured"})),{latestDryWeight:a}}});c.render=function(t,e,n,r,o,s){return a(),l("div",null,i(t.latestDryWeight??"-"),1)},c.__file="src/display.vue";var h=e({id:"navarch-display-weightlots-v2",name:"Navarch Display Weight Lots V2",icon:"box",description:"This is for displaying aggregate weight lot values in the Parcel home page with the Weight Results V2 interface.",component:c,options:null,types:["alias"],localTypes:["o2m"]});export{h as default};
