import{useApi as t,defineDisplay as n}from"@directus/extensions-sdk";import{defineComponent as e,ref as r,openBlock as l,createElementBlock as a,toDisplayString as i}from"vue";const o="foreign_key",u="lot_number",s="method",d="dry_weight",c="dry_weight_uom";var p=(t=>(t[t.Estimated=0]="Estimated",t[t.Planned=10]="Planned",t[t.Inturn=20]="Inturn",t[t["Inturn Final"]=30]="Inturn Final",t[t.Outturn=40]="Outturn",t))(p||{});var h=e({props:{value:{type:String,default:null}},setup(n){const e=r(null);return t().get("/items/navarch_weight_lot",{params:{filter:{[o]:{_eq:n.value},[u]:{_nnull:!0}},fields:[s,d,c]}}).then((t=>{const n=t.data.data,r=n.map((t=>t[s])).sort(((t,n)=>p[n]-p[t]));if(0===r.length)return;const l=r[0],a=n.filter((t=>t[s]===l)),i=(o=d,a.reduce(((t,n)=>{var e,r;return t+(null!=(r=parseFloat(null!=(e=n[o])?e:"0"))?r:0)}),0));var o;const u=function(t,n){var e;return 0!==t.length&&t[0]&&null!=(e=t[0][n])?e:null}(a,c);e.value=`${function(t,n=2,e=!0){if(isNaN(t)||null==t)return"-";const r=Math.round(t*Math.pow(10,n))/Math.pow(10,n),[l,a]=r.toString().split("."),i=l?l.replace(/\B(?=(\d{3})+(?!\d))/g,","):0;return a||e?`${i}.${(null!=a?a:"").padEnd(n,"0")}`:i}(i,4)}${u}`})).catch((t=>{console.error(t),e.value="Error occured"})),{totalWeight:e}}});h.render=function(t,n,e,r,o,u){return l(),a("div",null,i(t.totalWeight??"-"),1)},h.__file="src/display.vue";var g=n({id:"navarch-display-weightlots",name:"Navarch Display Weight Lots",icon:"box",description:"This is for displaying aggregate weight lot values in the Parcel home page.",component:h,options:null,types:["string"]});export{g as default};
