import{useApi as t,defineDisplay as n}from"@directus/extensions-sdk";import{defineComponent as e,ref as r,openBlock as a,createElementBlock as u,toDisplayString as l}from"vue";const i="foreign_key",o="method",s="dry_weight",c="dry_weight_uom";var d=(t=>(t[t.Estimated=0]="Estimated",t[t.Planned=10]="Planned",t[t.Inturn=20]="Inturn",t[t.InturnFinal=30]="InturnFinal",t[t.Outturn=40]="Outturn",t))(d||{});function p(t){switch(t){case"Inturn":return d.Inturn;case"Outturn":return d.Outturn;case"Inturn Final":return d.InturnFinal;case"Planned":return d.Planned;case"Estimated":return d.Estimated;default:throw new Error(`Invalid method type ${t}, please contact Navarch for support`)}}var h=e({props:{value:{type:String,default:null}},setup(n){const e=r(null);return t().get("/items/navarch_weight_lot",{params:{filter:{[i]:{_eq:n.value}},fields:[o,s,c]}}).then((t=>{const n=t.data.data,r=n.map((t=>t[o])).sort(((t,n)=>p(n)-p(t)));if(0===r.length)return;const a=r[0],u=n.filter((t=>t[o]===a)),l=(i=s,u.reduce(((t,n)=>{var e,r;return t+(null!=(r=parseFloat(null!=(e=n[i])?e:"0"))?r:0)}),0));var i;const d=function(t,n){var e;return 0!==t.length&&t[0]&&null!=(e=t[0][n])?e:null}(u,c);e.value=`${function(t,n=2,e=!0){if(isNaN(t)||null==t)return"-";const r=Math.round(t*Math.pow(10,n))/Math.pow(10,n),[a,u]=r.toString().split("."),l=a?a.replace(/\B(?=(\d{3})+(?!\d))/g,","):0;return u||e?`${l}.${(null!=u?u:"").padEnd(n,"0")}`:l}(l,4)}${d}`})).catch((t=>{console.error(t),e.value="Error occured"})),{totalWeight:e}}});h.render=function(t,n,e,r,i,o){return a(),u("div",null,l(t.totalWeight??"-"),1)},h.__file="src/display.vue";var g=n({id:"navarch-display-weightlots",name:"Navarch Display Weight Lots",icon:"box",description:"This is for displaying aggregate weight lot values in the Parcel home page.",component:h,options:null,types:["string"]});export{g as default};
