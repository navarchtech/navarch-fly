import{useApi as t,defineDisplay as n}from"@directus/extensions-sdk";import{defineComponent as e,ref as r,openBlock as a,createElementBlock as u,toDisplayString as l}from"vue";const i="foreign_key",s="method",o="dry_weight",d="dry_weight_uom";var c=(t=>(t[t.Estimated=0]="Estimated",t[t.Planned=10]="Planned",t[t.Inturn=20]="Inturn",t[t.InturnFinal=30]="InturnFinal",t[t.Outturn=40]="Outturn",t))(c||{});function p(t){switch(t){case"Inturn":return c.Inturn;case"Outturn":return c.Outturn;case"Inturn Final":return c.InturnFinal;case"Planned":return c.Planned;case"Estimated":return c.Estimated;default:throw new Error(`Invalid method type ${t}, please contact Navarch for support`)}}var h=e({props:{value:{type:String,default:null}},setup(n){const e=r(null);return t().get("/items/navarch_weight_lot",{params:{filter:{[i]:{_eq:n.value}},fields:[s,o,d]}}).then((t=>{const n=t.data.data,r=n.map((t=>t[s])).sort(((t,n)=>p(n)-p(t)));if(0===r.length)return;const a=r[0],u=n.filter((t=>t[s]===a)),l=(i=o,u.reduce(((t,n)=>{var e,r;return t+(null!=(r=parseFloat(null!=(e=n[i])?e:"0"))?r:0)}),0));var i;const c=function(t,n){var e;return 0!==t.length&&t[0]&&null!=(e=t[0][n])?e:null}(u,d);e.value=`${l.toFixed(4)} ${c}`})),{totalDryWeight:e}}});h.render=function(t,n,e,r,i,s){return a(),u("div",null,l(t.totalDryWeight??"-"),1)},h.__file="src/display.vue";var g=n({id:"navarch-display-weightlots",name:"Navarch Display Weight Lots",icon:"box",description:"This is for displaying aggregate weight lot values in the Parcel home page.",component:h,options:null,types:["string"]});export{g as default};
